<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Infinite Italian Brain Rot</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: scroll;
      height: 100vh;
      width: 100vw;
      background: black;
      color: white;
      font-family: monospace;
    }

    #grid {
      position: absolute;
      top: 0;
      left: 0;
    }

    .chunk {
      position: absolute;
      white-space: pre-wrap;
    }

    #music-button {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 20px;
      background: white;
      color: black;
      font-weight: bold;
      border: none;
      cursor: pointer;
      z-index: 1000;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <button id="music-button">Play Music</button>
  <div id="grid"></div>

  <audio id="bg-music" loop>
    <source src="https://cdn.pixabay.com/audio/2023/03/31/audio_4bcb3d7712.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    const phrases = [
      "mammamia che pizza",
      "bro ma che stai a dÃ¬",
      "fratm ha crashato la nonna",
      "pasta.exe has stopped working",
      "ciao bello ðŸ˜Ž",
      "giga mozzarella moment",
      "mamma ho visto un creeper IRL",
      "ðŸ—¿ðŸ—¿ðŸ—¿ðŸ—¿ðŸ—¿",
      "parmesan overdrive initiated",
      "sono in lag IRL",
      "napoletan.exe non risponde",
      "gondola speedrun",
      "bro ha detto 'ciao' e ha crashato",
      "stiamo vivendo in una lasagna dimensionale",
      "latte macchiato supremacy",
      "ha chiamato la polizia per il tiramisÃ¹ sbagliato",
      "il codice fiscale mi ha bannato",
      "non Ã¨ bug, Ã¨ feature alla romana",
      "mio zio lavora alla pizza hut segreta",
      "sto vivendo nel meme italiano 4D"
    ];

    const CHUNK_SIZE = 500;
    const VIEW_RADIUS = 2;
    const grid = document.getElementById("grid");
    const seenChunks = new Set();

    function getRandomPhraseLine() {
      let line = '';
      for (let i = 0; i < 8; i++) {
        line += phrases[Math.floor(Math.random() * phrases.length)] + " ";
      }
      return line.trim();
    }

    function createChunk(x, y) {
      const key = `${x},${y}`;
      if (seenChunks.has(key)) return;
      seenChunks.add(key);

      const chunk = document.createElement("div");
      chunk.className = "chunk";
      chunk.style.left = `${x * CHUNK_SIZE}px`;
      chunk.style.top = `${y * CHUNK_SIZE}px`;
      chunk.style.width = `${CHUNK_SIZE}px`;
      chunk.style.height = `${CHUNK_SIZE}px`;

      const lines = [];
      for (let i = 0; i < 20; i++) {
        lines.push(getRandomPhraseLine());
      }

      chunk.textContent = lines.join('\n');
      grid.appendChild(chunk);
    }

    function updateChunks() {
      const scrollX = window.scrollX;
      const scrollY = window.scrollY;
      const centerX = Math.floor(scrollX / CHUNK_SIZE);
      const centerY = Math.floor(scrollY / CHUNK_SIZE);

      for (let dx = -VIEW_RADIUS; dx <= VIEW_RADIUS; dx++) {
        for (let dy = -VIEW_RADIUS; dy <= VIEW_RADIUS; dy++) {
          createChunk(centerX + dx, centerY + dy);
        }
      }

      for (const child of Array.from(grid.children)) {
        const x = parseInt(child.style.left, 10) / CHUNK_SIZE;
        const y = parseInt(child.style.top, 10) / CHUNK_SIZE;
        if (Math.abs(x - centerX) > VIEW_RADIUS + 2 || Math.abs(y - centerY) > VIEW_RADIUS + 2) {
          grid.removeChild(child);
          seenChunks.delete(`${x},${y}`);
        }
      }
    }

    window.addEventListener("scroll", updateChunks);
    window.addEventListener("resize", updateChunks);

    // Center the user in the "infinite grid"
    window.scrollTo(500000, 500000);
    updateChunks();

    // Music
    const music = document.getElementById("bg-music");
    const musicButton = document.getElementById("music-button");

    musicButton.addEventListener("click", () => {
      music.play();
      musicButton.style.display = "none";
    });
  </script>
</body>
</html>
